#!/bin/bash

if [[ $1 = "-h" || $1 = "--help" ]]
then
  echo -e """usage: pscript [-h] [-w FILE] [-e FILE] [-d FILE]

optional arguments:
  -h, --help            show this help message and exit
  --no--output OPTION   
                        Disable ProtonScript Coder output.
  -w FILE, --write FILE 
                        Write a ProtonScript program.
  -e FILE, --encode FILE
                        Encode a ProtonScript program file.
  -d FILE, --decode FILE 
                        Decode a ProtonScript program file."""
                        
fi

if [[ $1 = "--no-output" ]]
then
if [[ $2 = "-e" || $1 = "--encode" ]]
then
if [[ $3 = "" ]]
then
echo -e "usage: pascript [-h] [-w FILE] [-e FILE] [-d FILE]"
echo -e "pscript: error: argument -e/--encode: expected one argument"
exit
fi
{
  mv ~/proton/script/coder/coder.py ~/proton/script/coder/pscript
  python3 ~/proton/script/coder/pscript -e $3
  } &> /dev/null
  exit
fi

if [[ $2 = "-d" || $1 = "--decode" ]]
then
if [[ $3 = "" ]]
then
echo -e "usage: pascript [-h] [-w FILE] [-e FILE] [-d FILE]"
echo -e "pscript: error: argument -d/--decode: expected one argument"
exit
fi
{
  mv ~/proton/script/coder/coder.py ~/proton/script/coder/pscript
  python3 ~/proton/script/coder/pscript -d $3
  } &> /dev/null
  exit
fi

elif [[ $1 = "-e" || $1 = "--encode" ]]
then
if [[ $2 = "" ]]
then
echo -e "usage: pascript [-h] [-w FILE] [-e FILE] [-d FILE]"
echo -e "pscript: error: argument -e/--encode: expected one argument"
exit
fi
  mv ~/proton/script/coder/coder.py ~/proton/script/coder/pscript
  python3 ~/proton/script/coder/pscript -e $2
  exit

elif [[ $1 = "-d" || $1 = "--decode" ]]
then
if [[ $2 = "" ]]
then
echo -e "usage: pascript [-h] [-w FILE] [-e FILE] [-d FILE]"
echo -e "pscript: error: argument -d/--decode: expected one argument"
exit
fi
  mv ~/proton/script/coder/coder.py ~/proton/script/coder/pscript
  python3 ~/proton/script/coder/pscript -d $2
  exit
  
elif [[ $1 = "-w" || $1 = "--write" ]] 
then
if [[ $2 = "" ]]
then
echo -e "usage: pascript [-h] [-w FILE] [-e FILE] [-d FILE]"
echo -e "pscript: error: argument -w/--write: expected one argument"
exit
fi
if [[ -f $2 ]]
then
  nano $2
  exit
else
  touch $2
  nano $2
  exit
fi
fi
